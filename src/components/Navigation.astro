---
import Icon from './Icon.astro';
---

<!-- Sticky Call Button (Mobile Only) -->
<a href="tel:2568261100" class="sticky-cta btn-primary w-16 h-16 rounded-full flex items-center justify-center shadow-2xl" aria-label="Call us">
  <Icon name="phone" class="w-6 h-6" />
</a>

<!-- Navigation -->
<nav class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm" role="navigation" aria-label="Main navigation">
  <div class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <a href="/" class="flex items-center space-x-3" aria-label="The Valley Clean Team - Home">
          <!-- Logo with explicit dimensions to prevent CLS -->
          <img
            src="https://res.cloudinary.com/dfjneoiaq/image/upload/f_auto,q_auto,w_280,h_112,c_pad/v1765045347/Logo_for_a_cleaning_gjyiyb.png"
            alt="The Valley Clean Team Logo"
            class="h-28"
            width="280"
            height="112"
            loading="eager"
            fetchpriority="high"
            decoding="async"
          />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="/" class="text-gray-700 hover:text-[#FFA985] transition">Home</a>

        <!-- Services Dropdown -->
        <div class="relative group">
          <a href="/services" class="text-gray-700 hover:text-[#FFA985] transition flex items-center">
            Services
            <Icon name="chevron-down" class="w-3 h-3 ml-1 transition-transform group-hover:rotate-180" />
          </a>
          <div class="absolute left-0 top-full pt-2 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="bg-white rounded-xl shadow-xl border border-gray-200 py-2 overflow-hidden">
              <a href="/services/deep-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="sparkles" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Deep Cleaning
              </a>
              <a href="/services/regular-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="home" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Regular Cleaning
              </a>
              <a href="/services/move-in-out-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="truck" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Move In/Out Cleaning
              </a>
              <a href="/services/green-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="leaf" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Green Cleaning
              </a>
              <a href="/services/airbnb-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="bed" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Airbnb Cleaning
              </a>
              <a href="/services/post-construction-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="hammer" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Post-Construction
              </a>
              <a href="/services/commercial-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="building" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Commercial/Office
              </a>
              <a href="/services/event-cleaning" class="flex items-center px-4 py-3 text-gray-700 hover:bg-[#FFA985]/10 hover:text-[#FFA985] transition">
                <Icon name="champagne-glasses" class="w-5 h-5 mr-3 text-[#FFA985]" />
                Event Cleaning
              </a>
              <div class="border-t border-gray-100 mt-2 pt-2">
                <a href="/services" class="flex items-center px-4 py-3 text-[#FFA985] font-semibold hover:bg-[#FFA985]/10 transition">
                  View All Services
                  <Icon name="arrow-right" class="w-3 h-3 ml-2" />
                </a>
              </div>
            </div>
          </div>
        </div>

        <a href="/locations" class="text-gray-700 hover:text-[#FFA985] transition">Locations</a>
        <a href="/about" class="text-gray-700 hover:text-[#FFA985] transition">About</a>
        <a href="/blog" class="text-gray-700 hover:text-[#FFA985] transition">Blog</a>
        <a href="/contact" class="text-gray-700 hover:text-[#FFA985] transition">Contact</a>
      </div>

      <!-- CTA Button -->
      <a href="/booking" class="hidden md:inline-flex bg-gradient-to-r from-[#FFA985] to-[#FFC67D] hover:from-[#FF8C61] hover:to-[#FFB366] text-[#333333] px-6 py-3 rounded-full font-semibold transition shadow-lg items-center">
        <Icon name="calendar-check" class="w-5 h-5 mr-2" />
        Book Now
      </a>

      <!-- Mobile Menu Button -->
      <button class="md:hidden p-2 text-gray-700" id="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false">
        <Icon name="bars" class="w-6 h-6" />
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div class="hidden md:hidden mt-4 pb-4 border-t border-gray-200 pt-4" id="mobile-menu">
      <div class="flex flex-col space-y-2">
        <a href="/" class="text-gray-700 hover:text-[#FFA985] transition py-2">Home</a>

        <!-- Mobile Services Accordion -->
        <div class="mobile-accordion">
          <button class="w-full flex items-center justify-between text-gray-700 hover:text-[#FFA985] transition py-2" id="mobile-services-btn" aria-expanded="false">
            <span>Services</span>
            <Icon name="chevron-down" class="w-3 h-3 transition-transform" />
          </button>
          <div class="hidden pl-4 space-y-1 pb-2" id="mobile-services-menu">
            <a href="/services/deep-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="sparkles" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Deep Cleaning
            </a>
            <a href="/services/regular-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="home" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Regular Cleaning
            </a>
            <a href="/services/move-in-out-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="truck" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Move In/Out
            </a>
            <a href="/services/green-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="leaf" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Green Cleaning
            </a>
            <a href="/services/airbnb-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="bed" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Airbnb Cleaning
            </a>
            <a href="/services/post-construction-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="hammer" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Post-Construction
            </a>
            <a href="/services/commercial-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="building" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Commercial/Office
            </a>
            <a href="/services/event-cleaning" class="flex items-center text-gray-600 hover:text-[#FFA985] transition py-2 text-sm">
              <Icon name="champagne-glasses" class="w-5 h-5 mr-2 text-[#FFA985]" />
              Event Cleaning
            </a>
            <a href="/services" class="flex items-center text-[#FFA985] font-semibold hover:text-[#FF8C61] transition py-2 text-sm">
              View All Services
              <Icon name="arrow-right" class="w-3 h-3 ml-2" />
            </a>
          </div>
        </div>

        <a href="/locations" class="text-gray-700 hover:text-[#FFA985] transition py-2">Locations</a>
        <a href="/about" class="text-gray-700 hover:text-[#FFA985] transition py-2">About</a>
        <a href="/blog" class="text-gray-700 hover:text-[#FFA985] transition py-2">Blog</a>
        <a href="/contact" class="text-gray-700 hover:text-[#FFA985] transition py-2">Contact</a>
        <a href="/booking" class="btn-primary text-center py-3 rounded-full font-semibold mt-2 flex items-center justify-center">
          <Icon name="calendar-check" class="w-5 h-5 mr-2" />
          Book Now
        </a>
      </div>
    </div>
  </div>
</nav>

<script is:inline>
  // Mobile menu toggle
  (function() {
    var btn = document.getElementById('mobile-menu-btn');
    var menu = document.getElementById('mobile-menu');
    if (btn && menu) {
      btn.addEventListener('click', function() {
        var expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', !expanded);
        menu.classList.toggle('hidden');
      });
    }

    // Mobile services accordion
    var servicesBtn = document.getElementById('mobile-services-btn');
    var servicesMenu = document.getElementById('mobile-services-menu');
    if (servicesBtn && servicesMenu) {
      servicesBtn.addEventListener('click', function() {
        var expanded = servicesBtn.getAttribute('aria-expanded') === 'true';
        servicesBtn.setAttribute('aria-expanded', !expanded);
        servicesMenu.classList.toggle('hidden');
        var icon = servicesBtn.querySelector('svg');
        if (icon) {
          icon.style.transform = expanded ? 'rotate(0deg)' : 'rotate(180deg)';
        }
      });
    }
  })();
</script>
